name: Dev Pipeline

on:
  push:
    branches: [dev]

  pull_request:
    branches: [dev]

env:
  DOTNET_VERSION: "9.0.x"

jobs:
  prepare:
    name: Prepare Enviroment
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup .NET
        uses: actions/setup-dotnet@v3
        with:
          dotnet-version: 9.0.x
  
  build:
    name: Build Project
    runs-on: ubuntu-latest
    needs: prepare
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Build Project
        uses: ./.github/actions/build
        with:
          project-dir: /src/Tasks/Tasks.API
    

  # prepare:
  #   name: Prepare Environment 
  #   uses: ./github/workflows/action.yml

  # build:
  #   name: Build Tasks.API
  #   needs: prepare
  #   uses: ./.github/workflows/actions/build/action.yml
  #   with:
  #     project-dir: src/Tasks/Tasks.API

  # unit-tests:
  #   name: Run Unit Tests
  #   needs: build
  #   uses: ./.github/workflows/actions/test/action.yml
  #   with:
  #     test-project-dir: src/Tasks/Tasks.UnitTests
